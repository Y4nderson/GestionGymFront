
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
<!-- Estilos de Flatpickr -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<!-- Script de Flatpickr -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<div class="card borde-azulll">
    <div class="card-body fondo-personalizado">
        <h5 class="card-title">Mantenimiento Pagos - FitYan</h5><br><br>
        <button class="btn btn-info btn-rounded" (click)="RegistrarPago()">Nuevo Pago</button>
    </div>
</div>


             
<div class="row">


    
    <!-- Tarjeta: Total Clientes -->
    <div class="col-md-3">
        <div class="card borde-azul">
            <div class="card-body fondo-personalizado">
                <h5 class="card-title">Pagos totales</h5><br>
                <h3 class="card-subtitle texttt">{{ pagosEstadisticas.totalPagos }}</h3>
            </div>
        </div>
    </div>

    <!-- Tarjeta: Clientes Activos -->
    <div class="col-md-3">
        <div class="card borde-azul">
            <div class="card-body fondo-personalizado">
                <h5 class="card-title">Pagos del Año</h5><br>
                <h3 class="card-subtitle texttt">{{ pagosEstadisticas.totalPagosAnio }}</h3>
            </div>
        </div>
    </div>

    <!-- Tarjeta: Clientes Inactivos -->
    <div class="col-md-3">
        <div class="card borde-azul">
            <div class="card-body fondo-personalizado">
                <h5 class="card-title">Pagos del Mes</h5><br>
                <h3 class="card-subtitle texttt">{{ pagosEstadisticas.totalPagosMes }}</h3>
            </div>
        </div>
    </div>

    <!-- Tarjeta: Próximos a Vencer -->
    <div class="col-md-3">
        <div class="card borde-azul">
            <div class="card-body fondo-personalizado">
                <h5 class="card-title">Pagos de la Semana </h5><br>
                <h3 class="card-subtitle texttt">{{ pagosEstadisticas.totalPagosSemana }}</h3>
            </div>
        </div>
    </div>
</div>

<!-- Barra de filtros -->


 <!-- Barra de búsqueda -->
 <div class="d-flex align-items-center gap-2">
    <input type="text" class="form-control colorrs" placeholder="Buscar pago por Cedula del cliente..." #inputBusqueda>
    <button class="btn cambiar-coloor"  (click)="mostrarPagosCedula(inputBusqueda.value)">
        <i class="fa-solid fa-magnifying-glass"></i>
    </button>
</div>


<div class="row animated fadeIn fast">
    <div class="col-12">
        <div class="card">
            <div class="card-body header-container">

               








                <div class="filter-container">
                    <label for="tipoMembresia">Filtrar por Tipo de Membresía:</label>
                    <select id="tipoMembresia" class="form-control">
                        <option value="">Seleccionar...</option>
                        <option value="Mensual">Mensual</option>
                        <option value="Anual">Anual</option>
                        <option value="Trimestral">Trimestral</option>
                        <option value="Dia">Día</option>
                    </select>
                    <button class="btn btn-primary mt-2" (click)="filtrarPagos()"><i class="fa-solid fa-magnifying-glass"></i></button>
                </div>







                   <!-- Botones de orden -->
                   <div class="btn-group d-flex gap-2 mt-3">
                    <button class="btn cambiar-coloor" (click)="mostrarPago()">Todos</button>
                    <button class="btn cambiar-coloor" (click)="mostrarAntiguos()" >Antiguos a más recientes</button>
                </div>
                    <!-- Filtros por fecha -->
        <div class="filter-container mt-3">
            <label for="fechaInicio">Fecha Inicio:</label>
            <input type="date" id="fechaInicio" class="form-control" [(ngModel)]="fechaInicio">

            <label for="fechaFin">Fecha Fin:</label>
            <input type="date" id="fechaFin" class="form-control" [(ngModel)]="fechaFin">

            <button class="btn filter-btn" (click)="buscarPagosPorFechas()">
                <i class="fa-solid fa-magnifying-glass"></i>
            </button>
        </div>

            
             
            
            </div>
            
            
        </div>
    </div>
</div>



<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                
                <h4 class="card-title">Pagos</h4>
                <br>
                <h6 class="card-subtitle">Lista de Pagos de Clientes</h6>
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Cliente</th>
                                <th>Tipo de Membresia</th>
                                <th>Monto</th>
                                <th>Metodo de Pago</th>
                                <th>Descripcion</th>
                                <th>Fecha de Pago</th>
                                <th>Pago registrado por</th>
                               
                        
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let pago of pagos | paginate: {itemsPerPage:7, currentPage: page}" >
                            
                                <td class="bigger">{{pago.cliente}}</td>
                                <td class="bigger">{{pago.tipoMembresia}}</td>
                                <td class="bigger">{{pago.monto}}</td>
                                <td class="bigger">{{pago.metodoDePago}}</td>
                                <td class="bigger">{{pago.concepto}}</td>
                                <td class="bigger">{{pago.fechaPago | date:'dd/MM/yyyy HH:mm'}}</td>
                                <td class="bigger">{{pago.usuarioRegistro}}</td>
                               
                               
                                
                            </tr>
                        </tbody>
                    </table>
                </div>
                <pagination-controls class="my-pagination" (pageChange)="page = $event"   previousLabel="Anterior"  nextLabel="Siguiente"></pagination-controls>
            </div>
        </div>
    </div>
</div>


